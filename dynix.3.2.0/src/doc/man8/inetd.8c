.\" $Copyright: $
.\" Copyright (c) 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991
.\" Sequent Computer Systems, Inc.   All rights reserved.
.\"  
.\" This software is furnished under a license and may be used
.\" only in accordance with the terms of that license and with the
.\" inclusion of the above copyright notice.   This software may not
.\" be provided or otherwise made available to, or used by, any
.\" other person.  No title to or ownership of the software is
.\" hereby transferred.
...
.V= $Header: inetd.8c 1.10 1991/04/15 23:37:13 $
.TH INETD 8C "\*(V)" "4BSD"
.SH NAME
inetd \- internet ``super\-server''
.SH SYNOPSIS
.B /usr/etc/inetd
[
.B \-d
] [ configuration file ]
.SH DESCRIPTION
.I Inetd
should be run at boot time by
.IR /etc/rc.local .
It then listens for connections on certain
internet sockets.  When a connection is found on one
of its sockets, it decides what service the socket
corresponds to, and invokes a program to service the request.
After the program is
finished, it continues to listen on the socket (except in some cases which
will be described below).  Essentially,
.I inetd
allows running one daemon to invoke several others,
reducing load on the system.
.PP
Upon execution,
.I inetd
reads its configuration information from a configuration
file which, by default, is
.IR /etc/inetd.conf .
There must be an entry for each field of the configuration
file, with entries for each field separated by a tab or
a space.  Comments are denoted by a ``#'' at the beginning
of a line.  There must be an entry for each field.  The
fields of the configuration file are as follows:
.br
	service name
.br
	socket type
.br
	protocol
.br
	wait/nowait
.br
	user
.br
	server program
.br
	server program arguments
.PP
The
.I service name
entry is the name of a valid service in
the file
.IR /etc/services/ .
For ``internal'' services (discussed below), the service
name
.I must
be the official name of the service (that is, the first entry in
.IR /etc/services ).
.PP
The
.I socket type
should be one of ``stream'', ``dgram'', ``raw'', ``rdm'', or ``seqpacket'',
depending on whether the socket is a stream, datagram, raw,
reliably delivered message, or sequenced packet socket.
.PP
The
.I protocol
must be a valid protocol as given in
.IR /etc/protocols .
Examples might be ``tcp'' or ``udp''.
For RPC services, the field consists of the  string
.IR rpc
followed by a slash and the name of the protocol.  For example the entry
.IR rpc/udp
indicates
a RPC service using the UDP protocol as a transport mechanism.
.PP
The
.I wait/nowait
entry is applicable to datagram sockets only (other sockets should
have a ``nowait'' entry in this space).  If a datagram server connects
to its peer, freeing the socket so
.I inetd
can received further messages on the socket, it is said to be
a ``multi-threaded'' server, and should use the ``nowait''
entry.  For datagram servers which process all incoming datagrams
on a socket and eventually time out, the server is said to be
``single-threaded'' and should use a ``wait'' entry.  ``Comsat'' (``biff'')
and ``talk'' are both examples of the latter type of
datagram server.
.I Tftpd
is an exception; it is a datagram server that establishes pseudo-connections.
It must be listed as ``wait'' in order to avoid a race;
the server reads the first packet, creates a new socket,
and then forks and exits to allow
.I inetd
to check for new service requests to spawn new servers.
.PP
The
.I user
entry should contain the user name of the user as whom the server
should run.  This allows for servers to be given less permission
than root.
The
.I server program
entry should contain the pathname of the program which is to be
executed by
.I inetd
when a request is found on its socket.  If
.I inetd
provides this service internally, this entry should
be ``internal''.
.PP
If arguments are to be given to the server program they should 
appear just after this entry as they normally are;
argv[0] is the name of
the program previously specified.  If the service is provided internally,
no arguments are required.
For example, the entry:
.nf

tftp    dgram   udp     wait    nobody  /usr/etc/tftpd  tftpd -s /tftpboot

.fi
will invoke 
.I /usr/etc/tftpd
with the arguments
.I tfptd, -s,
and
.I /tftpboot,
which tfptd can parse as if it were invoked from a shell prompt.
.PP
.I Inetd
provides several ``trivial'' services internally by use of
routines within itself.  These services are ``echo'',
``discard'', ``chargen'' (character generator), ``daytime''
(human readable time), and ``time'' (machine readable time,
in the form of the number of seconds since midnight, January
1, 1900).  All of these services are tcp based.  For
details of these services, consult the appropriate RFC
from the Network Information Center.
.PP
.I Inetd
rereads its configuration file when it receives a hangup signal, SIGHUP.
Services may be added, deleted or modified when the configuration file
is reread.
.SH "SEE ALSO"
comsat(8C), ftpd(8C), rexecd(8C), rlogind(8C), rshd(8C),
telnetd(8C), tftpd(8C)
